<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <title>Ù…ÙˆÙ‚Ø¹ Ù…Ù† Ù…ÙˆØ§Ù‚Ø¹ Ø§Ø¨ÙˆØ§Ù„Ø¯Ù‡Ø¨</title>
  <!-- Ø§Ù„Ø³Ø·Ø± Ø§Ù„Ù…Ù‡Ù… Ø¹Ù„Ø´Ø§Ù† Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
  <header>ğŸ’» Ù…Ø­Ù…ÙˆØ¯ Ø£Ø¨Ùˆ Ø§Ù„Ø¯Ù‡Ø¨</header>

  <!-- Ø±Ø³Ø§Ù„Ø© ØªØ±Ø­ÙŠØ¨ Ù…Ø¤Ù‚ØªØ© Ø­Ø³Ø¨ Ø§Ù„ÙˆÙ‚Øª -->
  <div id="time-popup" class="night-popup"></div>

  <!-- Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
  <div class="section">
    <p id="clock"></p>
    <h1>Ø§Ù‡Ù„Ø§Ù‹ ÙŠØ§ ØºØ§Ù„ÙŠ - Ø¯Ù‡ Ù…ÙˆÙ‚Ø¹ Ù…Ø­Ù…ÙˆØ¯ Ø£Ø¨Ùˆ Ø§Ù„Ø¯Ù‡Ø¨</h1>
    <p class="highlight">Ù‚ÙˆÙ„ Ù…Ø´Ø§Ø¡ Ø§Ù„Ù„Ù‡</p>
    <p id="welcome"></p>

    <!-- Ù…ÙƒØ§Ù† Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ø¯Ø§Ø¯ -->
    <p id="visits">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ø¯Ø§Ø¯...</p> <!-- âœ… Ø´ÙŠÙ„Øª Ø§Ù„Ù€ inline style -->

    <button id="toggle-prayer">ğŸ•‹ Ù…ÙˆØ¹Ø¯ Ø§Ù„ØµÙ„Ø§Ø©</button>
    <button onclick="alert('Ù†ÙˆØ±Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙŠØ§ ØºØ§Ù„ÙŠ!')">Ø§Ø¶ØºØ· Ù‡Ù†Ø§ ÙŠØ§ ØºØ§Ù„ÙŠ</button>
  </div>

  <!-- Ù†Ø§ÙØ°Ø© Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø© -->
  <div class="prayer-widget" id="prayer-widget">
    <h3>ğŸ•Œ Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø©</h3>
    <ul id="prayer-list"></ul>
  </div>

  <!-- Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª ÙˆØ§ØªØ³Ø§Ø¨ Ù„Ù„ØªÙˆØ§ØµÙ„ -->
  <div class="whatsapp-icons">
    <a href="https://wa.me/201155820103?text=Ù…Ø§Ø´Ø§Ø¡%20Ø§Ù„Ù„Ù‡%20Ø¹Ù„ÙŠÙƒ%20ÙŠØ­ÙˆØ¯Ù‡%20Ø§Ù„Ù…ÙˆÙ‚Ø¹%20Ø¬Ù…ÙŠÙ„" target="_blank" class="whatsapp-btn">ğŸ“± ÙˆØ§ØªØ³Ø§Ø¨ 1</a>
    <a href="https://wa.me/201014482794?text=Ù…Ø§Ø´Ø§Ø¡%20Ø§Ù„Ù„Ù‡%20Ø¹Ù„ÙŠÙƒ%20ÙŠØ­ÙˆØ¯Ù‡%20Ø§Ù„Ù…ÙˆÙ‚Ø¹%20Ø¬Ù…ÙŠÙ„" target="_blank" class="whatsapp-btn">ğŸ“± ÙˆØ§ØªØ³Ø§Ø¨ 2</a>
  </div>

  <!-- Ø§Ù„ÙÙˆØªØ± -->
  <footer>ØµÙÙ†Ø¹ Ù…Ù† Ø§Ù„Ø®Ø¨ÙŠØ± Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠ Ø§Ø¨ÙˆØ§Ù„Ø¯Ù‡Ø¨ âœ¨</footer>

  <script src="script.js"></script>

  <!-- Ù…ÙƒØªØ¨Ø§Øª Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>

  <script>
    // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ø´Ø±ÙˆØ¹Ùƒ Ù…Ù† Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyDg3HhwgnQQn_JOjXCGyCQP8YHF5FN8bE0",
      authDomain: "abodahab-4d14e.firebaseapp.com",
      projectId: "abodahab-4d14e",
      storageBucket: "abodahab-4d14e.appspot.com", // âœ… Ø§Ù„ØªØµØ­ÙŠØ­ Ù‡Ù†Ø§
      messagingSenderId: "442622031382",
      appId: "1:442622031382:web:38c1f156f43a683eb56737"
    };

    // ØªÙ‡ÙŠØ¦Ø© Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // Ù…Ø±Ø¬Ø¹ Ø§Ù„ÙˆØ«ÙŠÙ‚Ø© (collection: visits, doc: counter)
    const counterRef = db.collection("visits").doc("counter");

    async function updateCounterAndShow() {
      try {
        // Ø²ÙˆØ¯ Ø§Ù„Ø¹Ø¯Ø§Ø¯ 1 Ø¨Ø·Ø±ÙŠÙ‚Ø© Ø¢Ù…Ù†Ø© (merge)
        await counterRef.set(
          { count: firebase.firestore.FieldValue.increment(1) },
          { merge: true }
        );

        // Ø§Ù‚Ø±Ø£ Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­Ø¯ÙŠØ«
        const snap = await counterRef.get();
        const data = snap.data() || { count: 1 };
        document.getElementById("visits").innerText = "Ø¹Ø¯Ø¯ Ø²ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†: " + data.count;
      } catch (e) {
        document.getElementById("visits").innerText = "Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¹Ø¯Ø§Ø¯";
        console.error("Counter error:", e);
      }
    }

    // Ù†ÙÙ‘Ø° Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø£ÙˆÙ„ Ù…Ø§ Ø§Ù„ØµÙØ­Ø© ØªÙØªØ­
    updateCounterAndShow();
  </script>
</body>
</html>
